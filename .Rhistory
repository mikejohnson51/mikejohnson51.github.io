readxl::read_excel("mikes-data.xlsx", sheet = "funded_research")
funds = readxl::read_excel("mikes-data.xlsx", sheet = "funded_research")
sum(funds$amount)
sum(as.numeric(funds$amount))
as.numeric(funds$amount)
funds$amount
sum(readr::parse_number(funds$amount))
funds$amount2
total = sum(ifelse(is.na(readr::parse_number(funds$amount2)),
readr::parse_number(funds$amount2)
readr::parse_number(funds$amount))))
total = sum(ifelse(is.na(readr::parse_number(funds$amount2)),
readr::parse_number(funds$amount2)
readr::parse_number(funds$amount)))
is.na(readr::parse_number(funds$amount2))
total = sum(ifelse(is.na(readr::parse_number(funds$amount2)),
readr::parse_number(funds$amount2),
readr::parse_number(funds$amount)))
total
readr::parse_number(funds$amount))
readr::parse_number(funds$amount)
readr::parse_number(funds$amount2)
is.na(readr::parse_number(funds$amount2))
total = sum(ifelse(is.na(readr::parse_number(funds$amount2)),
readr::parse_number(funds$amount1),
readr::parse_number(funds$amoun2)))
sum(ifelse(is.na(readr::parse_number(funds$amount2)),
readr::parse_number(funds$amount1),
readr::parse_number(funds$amoun2)))
ifelse(is.na(readr::parse_number(funds$amount2)),
readr::parse_number(funds$amount1),
readr::parse_number(funds$amoun2))
readr::parse_number(funds$amoun2)
total = sum(ifelse(is.na(readr::parse_number(funds$amount2)),
readr::parse_number(funds$amount1),
readr::parse_number(funds$amount2)))
total = sum(ifelse(is.na(readr::parse_number(funds$amount2)),
readr::parse_number(funds$amount),
readr::parse_number(funds$amount2)))
total
team = sum(readr::parse_number(funds$amount)))
team = sum(readr::parse_number(funds$amount))
team
personal = paste0("$", formatC(as.numeric(personal), format="f", digits=2, big.mark=","))
personal = sum(ifelse(is.na(readr::parse_number(funds$amount2)),
readr::parse_number(funds$amount),
readr::parse_number(funds$amount2)))
personal = paste0("$", formatC(as.numeric(personal), format="f", digits=2, big.mark=","))
personal
team = paste0("$", formatC(as.numeric(team), format="f", digits=2, big.mark=","))
team
is.na(amount2))
is.na(funds$amount2))
is.na(funds$amount2)
funds %>%
mutate(amount = ifelse(is.na(amount2),
amount,
paste0(amount, " (Subaward: ", amount2)))
funds %>%
mutate(amount = ifelse(is.na(amount2),
amount,
paste0(amount, " (Subaward: ", amount2, ")")))
funds
detailed_entries(what  = source,
when  = date,
with  = name,
where = amount)
personal
teams
team
personal = paste0("$", formatC(as.numeric(personal), format="f", digits=0, big.mark=","))
personal
personal = paste0("$", formatC(as.numeric(personal), format="f", digits=2, big.mark=","))
personal
personal = sum(ifelse(is.na(readr::parse_number(funds$amount2)),
readr::parse_number(funds$amount),
readr::parse_number(funds$amount2)))
paste0("$", formatC(as.numeric(personal), format="f", digits=0, big.mark=","))
team = paste0("$", formatC(as.numeric(team), format="f", digits=0, big.mark=","))
personal = sum(ifelse(is.na(readr::parse_number(funds$amount2)),
readr::parse_number(funds$amount),
readr::parse_number(funds$amount2)))
funds = readxl::read_excel("mikes-data.xlsx", sheet = "funded_research")
personal = sum(ifelse(is.na(readr::parse_number(funds$amount2)),
readr::parse_number(funds$amount),
readr::parse_number(funds$amount2)))
personal
is.na(readr::parse_number(funds$amount2))
funds = readxl::read_excel("mikes-data.xlsx", sheet = "funded_research")
personal = sum(ifelse(is.na(readr::parse_number(funds$amount2)),
readr::parse_number(funds$amount),
readr::parse_number(funds$amount2)))
personal
personal = paste0("$", formatC(as.numeric(personal), format="f", digits=0, big.mark=","))
personal
team = sum(readr::parse_number(funds$amount))
team
team = paste0("$", formatC(as.numeric(team), format="f", digits=0, big.mark=","))
team
emo::js("map")
emo::ji("map")
emo::ji("mapmarker")
library(tidyverse)
library(vitae)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message=FALSE, error=FALSE)
mike_gs = scholar::get_profile('MrXM9cgAAAAJ')
collabs = length(mike_gs$coauthors)
follow = readLines('https://img.shields.io/github/followers/mikejohnson51?label=follow&style=social')
f = stringr::str_match(follow, "<title>Follow: \\s*(.*?)\\s*</title>")[,2]
stars = readLines('https://img.shields.io/github/stars/mikejohnson51?affiliations=OWNER%2CCOLLABORATOR%2CORGANIZATION_MEMBER&style=social')
s = stringr::str_match(stars, "<title>Stars: \\s*(.*?)\\s*</title>")[,2]
funds = readxl::read_excel("mikes-data.xlsx", sheet = "funded_research")
personal = sum(ifelse(is.na(readr::parse_number(funds$amount2)),
readr::parse_number(funds$amount),
readr::parse_number(funds$amount2)))
personal = paste0("$", formatC(as.numeric(personal), format="f", digits=0, big.mark=","))
team = sum(readr::parse_number(funds$amount))
team = paste0("$", formatC(as.numeric(team), format="f", digits=0, big.mark=","))
scholar::get_publications("vamErfkAAAAJ") %>%
detailed_entries(
what = title,
when = year,
with = author,
where = journal,
why = cites
)
\href{https://tinyurl.com/mike-google-scholar}{Google Scholar: `r mike_gs$total_cites` citations; h-index `r mike_gs$h_index`; i-index `r mike_gs$i10_index`; `r collabs` collaborators}
data = scholar::get_publications('MrXM9cgAAAAJ') %>%
filter(!grepl("AGU|EGU|Fall Meeting", journal)) %>%
filter(journal != "") %>%
mutate(bibtype = "article")
# arrange(-year) %>%
# mutate(author = gsub("J Johnson", "JM Johnson", author),
#        author = gsub("JM Johnson", "JM Johnson", author),
#        author = gsub("Johnson, J", "JM Johnson", author),
#        author = gsub("Johnson, J. Michael", "JM Johnson", author),
#        title  = gsub("Ogc", "OGC", title),
#        #itle  = gsub("HY_Features", "HY Features", title),
#        #title  = stringr::str_to_title(title),
#
#        journal  = stringr::str_to_title(journal),
#        bibtype = "article")
RefManageR::as.BibEntry(data) %>%
RefManageR::WriteBib("software.bib")
vitae::bibliography_entries("software.bib") %>%
arrange(desc(issued))
scholar::get_publications("MrXM9cgAAAAJ") %>%
detailed_entries(
what = title,
when = year,
with = author,
where = journal,
why = cites
)
mike_gs$total_cites
mike_gs$h_index
mike_gs$i10_index
collabs
??cvskill
data = scholar::get_publications('MrXM9cgAAAAJ') %>%
filter(!grepl("AGU|EGU|Fall Meeting", journal)) %>%
filter(journal != "") %>%
mutate(bibtype = "article")
RefManageR::as.BibEntry(data) %>%
RefManageR::WriteBib("software.bib")
vitae::bibliography_entries("software.bib") %>%
arrange(desc(issued))
scholar::get_publications("MrXM9cgAAAAJ") %>%
detailed_entries(
what = title,
when = year,
with = author,
where = journal,
why = cites
)
scholar::get_publications("MrXM9cgAAAAJ")
scholar::get_publications("MrXM9cgAAAAJ") %>%
filter(!grepl("AGU|EGU|Fall Meeting", journal)) %>%
filter(journal != "") %>%
arrange(-year)
scholar::get_publications("MrXM9cgAAAAJ") %>%
filter(!grepl("AGU|EGU|Fall Meeting", journal)) %>%
filter(journal != "") %>%
arrange(-year) %>%
detailed_entries(
what = title,
when = year,
with = author,
where = journal,
why = cites
)
scholar::get_publications("MrXM9cgAAAAJ")
\faicon{plane} My journey
mike_gs
cites = scholar::get_publications('MrXM9cgAAAAJ')
personal
rmarkdown::render("ttt.Rmd", output_file = "docs/mike_johnson_cv.pdf")
create_table <- function(table = NULL, file_name = NULL, removeHeaders = TRUE, caption = NULL) {
table <- rbind(rep("", ncol(table)), table) %>%
kable(escape = FALSE, caption = caption, align = c("l")) %>%
kable_styling(bootstrap_options = c("hover"))
if (removeHeaders) {
table <- gsub("<thead>.*</thead>", "", table)
}
fileConn <- file(paste0('docs/', file_name))
writeLines(table, fileConn)
close(fileConn)
}
sass::sass(
sass::sass_file("docs/resources/scss/miketheme.scss"),
output = "docs/resources/css/bootstrap.css",
options = sass::sass_options(output_style = "nested")
)
awards = read_excel(data_file, sheet = "awards")
data_file <- "mikes-data.xlsx"
awards = read_excel(data_file, sheet = "awards")
awards
awards = read_excel(data_file, sheet = "awards")
awards_html <- awards %>%
mutate(
col2 = paste(text_spec(name, bold = TRUE), details, sep = " - ")
) %>% filter(type == "Awards and Fellowships") %>%
select(year, col2) %>%
setNames(c("Awards and Fellowships", ""))
spelling::spell_check_files(c("ttt.Rmd"))
install.packages('spelling')
spelling::spell_check_files(c("ttt.Rmd"))
awards = read_excel(data_file, sheet = "awards")
awards_html <- awards %>%
mutate(
col2 = paste(text_spec(name, bold = TRUE), details, sep = " - ")
) %>% filter(type == "Awards and Fellowships") %>%
select(year, col2) %>%
setNames(c("Awards and Fellowships", ""))
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
library(dplyr)
library(knitr)
library(kableExtra)
library(readxl)
library(glue)
data_file <- "mikes-data.xlsx"
rmarkdown::render("ttt.Rmd", output_file = "docs/mike_johnson_cv.pdf")
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
library(dplyr)
library(knitr)
library(kableExtra)
library(readxl)
library(glue)
data_file <- "mikes-data.xlsx"
#rmarkdown::render("ttt.Rmd", output_file = "docs/mike_johnson_cv.pdf")
create_table <- function(table = NULL, file_name = NULL, removeHeaders = TRUE, caption = NULL) {
table <- rbind(rep("", ncol(table)), table) %>%
kable(escape = FALSE, caption = caption, align = c("l")) %>%
kable_styling(bootstrap_options = c("hover"))
if (removeHeaders) {
table <- gsub("<thead>.*</thead>", "", table)
}
fileConn <- file(paste0('docs/', file_name))
writeLines(table, fileConn)
close(fileConn)
}
sass::sass(
sass::sass_file("docs/resources/scss/miketheme.scss"),
output = "docs/resources/css/bootstrap.css",
options = sass::sass_options(output_style = "nested")
)
awards = read_excel(data_file, sheet = "awards")
awards_html <- awards %>%
mutate(
col2 = paste(text_spec(name, bold = TRUE), details, sep = " - ")
) %>% filter(type == "Awards and Fellowships") %>%
select(year, col2) %>%
setNames(c("Awards and Fellowships", ""))
travel_html <- awards %>%
mutate(
col2 = paste(text_spec(name, bold = TRUE), details, sep = " - ")
)  %>% filter(type == "Travel Grants") %>%
select(year, col2) %>%
setNames(c("Travel Grants", ""))
create_table(table = travel_html,  file_name = 'travel_grants.html', removeHeaders = FALSE )
create_table(table = awards_html, file_name = 'awards.html', removeHeaders = FALSE)
grants = read_excel(data_file, sheet = "funded_research")
grants$amount = ifelse(is.na(grants$amount), "Not Disclosed", scales::dollar(grants$amount))
grants = read_excel(data_file, sheet = "funded_research") %>%
mutate(amount = ifelse(is.na(amount2) | amount2 == 0,
amount,
paste0(amount, " (Subaward: ", amount2, ")")))
grants_html <- grants %>% mutate(record = text_spec(grants$name, italic = TRUE),
amount = grants$amount,
role = text_spec(grants$role, bold = T),
source = grants$source) %>%
select(date, role, record, source, amount)  %>%
setNames(c('Year', rep("", nrow(grants)-1)))
create_table(table = grants_html,  file_name = 'funding.html', removeHeaders = FALSE)
presentations = read_excel(data_file, sheet = "presentations")
presentations_html <- presentations %>% filter(type == 'presentation') %>%
mutate(record = paste0(
'<i class="fas fa-microphone-alt"></i>', "  ",
text_spec(title, bold = T), ". ",
text_spec(location, italic = TRUE), ". ", data)) %>%
select("Presentation" = record)
posters_html <- presentations %>% filter(type != 'presentation') %>%
mutate(record = paste0(
'<i class="far fa-map"></i>', "  ",
text_spec(title, bold = F), ". ",
text_spec(location, italic = TRUE), ". ", data)) %>%
select('Poster' = record)
create_table(table = presentations_html, file_name = 'presentations.html', removeHeaders = FALSE)
create_table(table = posters_html, file_name = 'posters.html',  removeHeaders = FALSE)
teaching = read_excel(data_file, sheet = "teaching")
teaching <- teaching %>%
mutate(quarter = factor(quarter, levels = c("Fall", "Winter", "Spring", "Summer"),
ordered = T),
class_link = ifelse(is.na(link), class,
paste0('<a href="',link, '">', class, '</a>'))) %>%
group_by(type, class, class_link, quarter, professor, division) %>%
mutate(points = as.numeric(year) + as.numeric(quarter)/10) %>%
summarise(year = paste(year,collapse=', '),
points = max(points)) %>%
tidyr::unite(data, quarter, year, sep = " ") %>%
arrange(desc(points))
teaching_html <- teaching %>%
filter(type == "Instructor") %>%
mutate(
' ' = paste0(text_spec(class_link, bold = TRUE, escape = FALSE), "<br>",
division, " - ", text_spec(professor, italic = TRUE))) %>%
ungroup() %>%
select(data, ' ') %>%
rename('Instructor' = data)
teaching_assisstant_html <- teaching %>%
filter(type == "Teaching Assisstant") %>%
mutate(
' ' = paste0(text_spec(class_link, bold = TRUE, escape = FALSE), "<br>",
division, " - ", text_spec(professor, italic = TRUE))) %>%
ungroup() %>%
select(data, ' ') %>%
rename('Teaching Assistant' = data)
create_table(table = teaching_html, file_name = 'teaching.html', removeHeaders = FALSE)
create_table(table = teaching_assisstant_html, file_name = 'teaching-assisstant.html', removeHeaders = FALSE)
# Affiliations Table
affiliations = readxl::read_xlsx(data_file, sheet = "coauthors")
# Affiliations Map
require(leaflet)
require(htmltools)
library(dplyr)
authors  = lapply(paste("<strong>", affiliations$Name, "</strong><br>", gsub(";", "<br>", affiliations$people)),  htmltools::HTML)
# Generate Map
affiliation_map = leaflet(affiliations, options = leafletOptions(zoomControl = FALSE,
minZoom = 2, maxZoom = 2, dragging = FALSE)) %>%
addProviderTiles(providers$CartoDB.PositronNoLabels) %>%
addCircleMarkers(lng = ~as.numeric(Long), lat = ~as.numeric(Lat),
radius = ~lengths(strsplit(affiliations$people, ";"))*4,
color = ~ifelse(affiliations$Name == "UCSB Geography", "red", "navy"),
stroke = FALSE,
fillOpacity = 0.7,
label = authors,
labelOptions =  labelOptions(keepInView = TRUE, autoPan = FALSE,
style = list(
"box-shadow" = "9px 9px rgba(0,0,0,0.25)",
"border-color" = "navy",
"padding-right" = "10px",
"background-color" = "white")))
# Create HTML file
f<-paste0(getwd(), "/docs/affiliations_map.html")
htmlwidgets::saveWidget(affiliation_map,file.path(normalizePath(dirname(f)),basename(f)))
# Generate Footer
footer = paste0('<div class=" container">
<div class="row">
<div class="col-md-6">
<p>
Ellision Hall 1719<br />
University of California, Santa Barbara<br />
Santa Barbara, CA 93106<br />
</p>
</div>
<div class="col-md-6 text-right">
<a href="https://github.com/mikejohnson51" target="_blank" class="social-link"><i class="fab fa-github fa-2x grow"></i></a>
<a href="https://scholar.google.com/citations?hl=en&user=MrXM9cgAAAAJ&view_op=list_works&sortby=pubdate" target="_blank" class="social-link fa-2x"><i class="ai ai-google-scholar grow"></i></i></a>
<a href="https://www.researchgate.net/profile/Mike_Johnson29" target="_blank" class="social-link fa-2x"><i class="ai ai-researchgate grow"></i></a>
<a href="mailto:mike.johnson@geog.ucsb.edu" target="_blank" class="social-link fa-2x"><i class="far fa-envelope grow"></i></i></a>
<p>Last Updated: ', format(Sys.time(), "%B %e, %Y"), '</p>
</div>
</div>')
fileConn<-file('docs/footer.html')
writeLines(footer, fileConn)
close(fileConn)
current_work = read_excel(data_file, sheet = "current_work")
is.even <- function(x) x %% 2 == 0
html = ''
for (i in 1:nrow(current_work)) {
data = current_work[i,]
#  if(!is.even(i)) {
html = paste0(html,
'<div class="row featurette">
<div class="col-md-7">
<h4 class="featurette-heading">', data$main, '. <span class="text-muted">', ifelse(is.na(data$sub), '', paste0(data$sub, '.')), '</span></h4>
<p>', data$text,
#  '<p><strong>Working with: </strong>', data$working_with, '</p>
'</div>
<div class="col-md-5">
<img class="featurette-image img-responsive center-block shadow-right" src="', data$pic, '" data-src="holder.js/500x500/auto" alt="Generic placeholder image">
</div>
</div>'
)
if (i < nrow(current_work)) {
html = paste0(html, '<hr class="featurette-divider">')
}
fileConn<-file('docs/current_work.html')
writeLines(html, fileConn)
close(fileConn)
software = read_excel(data_file, sheet = "software") %>%
filter(!is.na(text))  %>%
mutate(pic = replace(pic, is.na(pic), "resources/images/software/R_logo.png"))
make_software = function(software, type = "Author On"){
d <- software %>%
filter(!is.na(text))  %>%
mutate(pic = replace(pic, is.na(pic), "resources/images/software/R_logo.png")) %>%
filter(role == !!type)
lapply(1:nrow(d), function(x){
paste0('<div class="row featurette">
<div class="col-md-7">
<h4 class="featurette-heading">', d$main[x], '. <span class="text-muted">',
ifelse(is.na(d$sub[x]), '', paste0(d$sub[x], '.')), '</span></h4>
<h4><span><strong> Role:</strong> ', d$role[x], '</span></h4>',
'<p>', d$text[x], '</p>',
ifelse(is.na(d$homepage[x]),'',paste0('<a class="btn btn-primary" href="', d$homepage[x] ,'" role="button">Homepage</a>')),
ifelse(is.na(d$code[x]),'',paste0('<a class="btn btn-primary" href="', d$code[x] ,'" role="button">Code</a>')),
'</p>
</div>
<div class="col-md-5">
<div class="github-card" data-github="', gsub("https://github.com/", "", d$code[x]), '" data-width="400" data-height="" data-theme="default"></div>
<script src="resources/js/widget.js"></script>
</div>
<hr class="featurette-divider">'
)
})
}
#
# make_software = function(software, type = "Author On"){
#   d <- software %>%
#     filter(!is.na(text))  %>%
#     mutate(pic = replace(pic, is.na(pic), "resources/images/software/R_logo.png")) %>%
#     filter(role == !!type)
#
#   lapply(1:nrow(d), function(x){
#     paste0('<div class="row featurette">
#       <div class="col-md-7">
#         <h4 class="featurette-heading">', d$main[x], '. <span class="text-muted">',
#         ifelse(is.na(d$sub[x]), '', paste0(d$sub[x], '.')), '</span></h4>
#         <h4><span><strong> Role:</strong> ', d$role[x], '</span></h4>',
#         '<p>', d$text[x], '</p>',
#             ifelse(is.na(d$homepage[x]),'',paste0('<a class="btn btn-primary" href="', d$homepage[x] ,'" role="button">Homepage</a>')),
#             ifelse(is.na(d$code[x]),'',paste0('<a class="btn btn-primary" href="', d$code[x] ,'" role="button">Code</a>')),
#         '</p>
#       </div>
#
#       <div class="col-md-5">
#         <img class="featurette-image img-responsive center-block shadow-right" src="', d$pic[x], '" style="width:150;height:150;" data-src="holder.js/500x500/auto" alt="Generic placeholder image"></img>
#       </div>
#      </div>
#      <hr class="featurette-divider">'
#     )
#
#   })
# }
one = make_software(software, "Author, Creator")
two = make_software(software, type = "Author On")
three = make_software(software, "Contributor To")
fileConn<-file('docs/software.html')
writeLines(paste(unlist(c(one,two,three)), collapse = " "), fileConn)
close(fileConn)
data_file
teaching = read_excel('mikes-data.xlsx', sheet = "teaching")
footer = paste0('<div class=" container">
<div class="row">
<div class="col-md-6">
<p>
🏔️🌲🌄 Fort Collins, CO 🌄🌲🏔 <br />
University of California, Santa Barbara <br />
Santa Barbara, CA 93106<br />
</p>
</div>
<div class="col-md-6 text-right">
<a href="https://github.com/mikejohnson51" target="_blank" class="social-link"><i class="fab fa-github fa-2x grow"></i></a>
<a href="https://scholar.google.com/citations?hl=en&user=MrXM9cgAAAAJ&view_op=list_works&sortby=pubdate" target="_blank" class="social-link fa-2x"><i class="ai ai-google-scholar grow"></i></i></a>
<a href="https://www.researchgate.net/profile/Mike_Johnson29" target="_blank" class="social-link fa-2x"><i class="ai ai-researchgate grow"></i></a>
<a href="mailto:mike.johnson@geog.ucsb.edu" target="_blank" class="social-link fa-2x"><i class="far fa-envelope grow"></i></i></a>
<p>Last Updated: ', format(Sys.time(), "%B %e, %Y"), '</p>
</div>
</div>')
footer = paste0('<div class=" container">
<div class="row">
<div class="col-md-6">
<p>
🏔️🌲🌄 Fort Collins, CO 🌄🌲🏔 <br />
University of California, Santa Barbara <br />
Santa Barbara, CA 93106<br />
</p>
</div>
<div class="col-md-6 text-right">
<a href="https://github.com/mikejohnson51" target="_blank" class="social-link"><i class="fab fa-github fa-2x grow"></i></a>
<a href="https://scholar.google.com/citations?hl=en&user=MrXM9cgAAAAJ&view_op=list_works&sortby=pubdate" target="_blank" class="social-link fa-2x"><i class="ai ai-google-scholar grow"></i></i></a>
<a href="https://www.researchgate.net/profile/Mike_Johnson29" target="_blank" class="social-link fa-2x"><i class="ai ai-researchgate grow"></i></a>
<a href="mailto:mike.johnson@geog.ucsb.edu" target="_blank" class="social-link fa-2x"><i class="far fa-envelope grow"></i></i></a>
<p>Last Updated: ', format(Sys.time(), "%B %e, %Y"), '</p>
</div>
</div>')
fileConn<-file('docs/footer.html')
writeLines(footer, fileConn)
close(fileConn)
---
title: "Website Generator"
